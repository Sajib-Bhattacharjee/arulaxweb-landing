<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test EmailJS - AruLax Web</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #00b09b;
        text-align: center;
      }
      button {
        background: linear-gradient(135deg, #00b09b, #96c93d);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
        margin: 10px 0;
      }
      button:hover {
        transform: scale(1.02);
      }
      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 8px;
        display: none;
      }
      .success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .info {
        background: #d1ecf1;
        color: #0c5460;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #00b09b;
      }
      .code {
        background: #f4f4f4;
        padding: 10px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 14px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üß™ EmailJS Test - AruLax Web</h1>

      <div class="info">
        <strong>üìß Testing Order Email Feature</strong><br />
        This will send a test order email to verify EmailJS is working
        correctly.
      </div>

      <div class="code">
        <strong>Your Credentials:</strong><br />
        Service ID: service_nxfft8o<br />
        Template ID: template_7wbakmm<br />
        Public Key: KIuUNSFAOq0IwhtWK
      </div>

      <button onclick="testEmail()" id="testBtn">
        üìß Send Test Order Email
      </button>

      <div id="result" class="result"></div>

      <div class="info" style="margin-top: 30px">
        <strong>‚ö†Ô∏è Important:</strong><br />
        1. Make sure you've set the "To Email" field in your EmailJS template<br />
        2. Go to:
        <a href="https://dashboard.emailjs.com" target="_blank"
          >EmailJS Dashboard</a
        ><br />
        3. Edit template: template_7wbakmm<br />
        4. Set "To Email" to your Gmail address<br />
        5. Save the template
      </div>
    </div>

    <script>
      // Initialize EmailJS (required for version 4.x)
      (function () {
        emailjs.init("KIuUNSFAOq0IwhtWK");
      })();

      function testEmail() {
        const btn = document.getElementById("testBtn");
        const resultDiv = document.getElementById("result");

        // Disable button
        btn.disabled = true;
        btn.textContent = "üì§ Sending...";
        resultDiv.style.display = "none";

        // Test order data
        const testParams = {
          customer_name: "Test Order",
          customer_email: "test@arulaxweb.com",
          order_id: "TEST-" + Date.now(),
          order_date: new Date().toLocaleString("en-US", {
            dateStyle: "full",
            timeStyle: "short",
          }),
          total_items: "2",
          order_items: `1. Business Management System
   Category: Business
   Quantity: 1
   Price: $1499.50 each
   Subtotal: $1499.50

2. E-Commerce Platform
   Category: E-Commerce
   Quantity: 1
   Price: $999.50 each
   Subtotal: $999.50`,
          subtotal: "2499.00",
          discount: "1249.50",
          total_amount: "1249.50",
          you_saved: "1249.50",
        };

        console.log("=== SENDING TEST EMAIL ===");
        console.log("Service ID:", "service_nxfft8o");
        console.log("Template ID:", "template_7wbakmm");
        console.log("Parameters:", testParams);

        // Send email
        emailjs.send("service_nxfft8o", "template_7wbakmm", testParams).then(
          function (response) {
            console.log("‚úÖ SUCCESS!", response);
            resultDiv.className = "result success";
            resultDiv.innerHTML = `
                        <strong>‚úÖ Success!</strong><br>
                        Test email sent successfully!<br>
                        Status: ${response.status} - ${response.text}<br><br>
                        <strong>üìß Check your Gmail inbox!</strong><br>
                        (Also check spam folder if you don't see it)
                    `;
            resultDiv.style.display = "block";
            btn.textContent = "‚úÖ Test Email Sent!";
          },
          function (error) {
            console.error("‚ùå FAILED!", error);
            resultDiv.className = "result error";
            resultDiv.innerHTML = `
                        <strong>‚ùå Failed to send email</strong><br>
                        Error: ${
                          error.text || error.message || "Unknown error"
                        }<br><br>
                        <strong>Common Solutions:</strong><br>
                        1. Check if "To Email" is set in template settings<br>
                        2. Verify service is connected in EmailJS dashboard<br>
                        3. Check your credentials are correct<br>
                        4. Make sure you haven't exceeded 200 emails/month<br><br>
                        <strong>Full Error:</strong><br>
                        <pre style="background: #f4f4f4; padding: 10px; overflow-x: auto;">${JSON.stringify(
                          error,
                          null,
                          2
                        )}</pre>
                    `;
            resultDiv.style.display = "block";
            btn.textContent = "‚ùå Failed - Try Again";
            btn.disabled = false;
          }
        );
      }
    </script>
  </body>
</html>
